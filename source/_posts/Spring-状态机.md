---
title: Spring 状态机
date: 2024-06-21 18:51:13
tags: 
    - "Spring"
    - "Java"
categories:
    - "Program"
cover: "https://raw.githubusercontent.com/ChaoSBYNN/image-hosting/main/program/spring.png"
---

# Spring 状态机

## 什么是状态机

> 先来解释什么是"状态"（ State ）。现实事物是有不同状态的，例如一个自动门，就有 open 和 closed 两种状态。我们通常所说的状态机是有限状态机，也就是被描述的事物的状态的数量是有限个，例如自动门的状态就是两个 open 和 closed 。

状态机，也就是 State Machine ，不是指一台实际机器，而是指一个数学模型。
说白了，一般就是指一张状态转换图。例如，根据自动门的运行规则，我们可以抽象出下面这么一个图。
自动门有两个状态，open 和 closed ，closed 状态下，如果读取开门信号，那么状态就会切换为 open 。
open 状态下如果读取关门信号，状态就会切换为 closed 。
状态机的全称是有限状态自动机，自动两个字也是包含重要含义的。
给定一个状态机，同时给定它的当前状态以及输入，那么输出状态时可以明确的运算出来的。例如对于自动门，给定初始状态 closed ，给定输入"开门"，那么下一个状态时可以运算出来的。
重复一下：状态机是有限状态自动机的简称，是现实事物运行规则抽象而成的一个数学模型。

## 四大概念

- 状态 : 一个状态机至少要包含两个状态。例如上面自动门的例子，有 open 和 closed 两个状态。
- 事件 : 事件就是执行某个操作的触发条件或者口令。对于自动门，"按下开门按钮"就是一个事件。
- 动作 : 事件发生以后要执行动作。例如事件是"按开门按钮"，动作是"开门"。编程的时候，一个 Action一般就对应一个函数。
- 转变 : 也就是从一个状态变化为另一个状态。例如"开门过程"就是一个变换。

有限状态机（Finite-state machine,FSM），又称有限状态自动机，简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。
FSM是一种算法思想，简单而言，有限状态机由一组状态、一个初始状态、输入和根据输入及现有状态转换为下一个状态的转换函数组成。
其作用主要是描述对象在它的生命周期内所经历的状态序列，以及如何响应来自外界的各种事件。

①现态：是指当前所处的状态。待支付
②条件：又称为"事件"，当一个条件被满足，将会触发一个动作，或者执行一次状态的迁移。支付事件
③动作：条件满足后执行的动作。动作执行完毕后，可以迁移到新的状态，也可以仍旧保持原状态。动作不是必需的，当条件满足后，也可以不执行任何动作，直接迁移到新状态。状态转换为待发货
④次态：条件满足后要迁往的新状态。"次态"是相对于"现态"而言的，"次态"一旦被激活，就转变成新的"现态"了。待发货 注意事项

[Spring状态机](https://mp.weixin.qq.com/s/PNYpCWw_7HIDevMLv4-QxA)